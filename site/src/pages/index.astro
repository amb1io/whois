---
import "../styles/global.css";
const year = new Date().getFullYear();
const vapidPublicKey = import.meta.env.PUBLIC_VAPID_KEY ?? "";
const baseUrl = import.meta.env.BASE_URL ?? "/";
const normalizedBase = baseUrl === "/" ? "" : baseUrl.replace(/\/$/, "");
const whoisApiPath = `${normalizedBase}/api/whois`;
const subscriptionsApiPath = `${normalizedBase}/api/subscriptions`;
const withBasePath = (path: string) =>
  normalizedBase ? `${normalizedBase}${path}` : path;
const siteOrigin = Astro.site?.origin ?? "https://example.com";
const siteTitle = "Domain Alert";
const siteDescription =
  "Monitor WHOIS changes, receive domain expiration alerts, and stay ahead of critical DNS updates.";
const siteAuthor = "Rhamses Soares";
const canonicalUrl = `${siteOrigin}${normalizedBase || "/"}`;
const ogImageUrl = `${siteOrigin}${normalizedBase || ""}/images/domain-alert-og.png`;
const logoUrl = `${siteOrigin}${normalizedBase || ""}/images/domain-alert-logo.png`;
const schemaData = {
  "@context": "https://schema.org",
  "@type": "WebApplication",
  name: siteTitle,
  url: canonicalUrl,
  description: siteDescription,
  applicationCategory: "Domain management",
  operatingSystem: "Web",
  inLanguage: "en",
  author: {
    "@type": "Person",
    name: siteAuthor
  },
  publisher: {
    "@type": "Organization",
    name: siteTitle,
    logo: {
      "@type": "ImageObject",
      url: logoUrl
    }
  },
  offers: {
    "@type": "Offer",
    price: "0",
    priceCurrency: "USD"
  },
  potentialAction: {
    "@type": "SearchAction",
    target: `${canonicalUrl}api/whois?domain={domain}`,
    "query-input": "required name=domain"
  }
};
const faviconHref = withBasePath("/favicon.svg");
const manifestHref = withBasePath("/manifest.webmanifest");
const appleTouchIconHref = withBasePath("/icons/icon-512x512.png");
const themeColor = "#2563eb";
const serviceWorkerUrl = withBasePath("/sw.js");
const serviceWorkerScope = normalizedBase ? `${normalizedBase}/` : "/";
---

<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href={faviconHref} />
    <link rel="manifest" href={manifestHref} />
    <link rel="apple-touch-icon" href={appleTouchIconHref} />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,user-scalable=yes"
    />
    <meta name="theme-color" content={themeColor} />
    <meta name="description" content={siteDescription} />
    <meta name="keywords" content="domain monitoring, whois alerts, domain expiration, DNS updates, domain alert" />
    <meta name="author" content={siteAuthor} />
    <meta name="generator" content={Astro.generator} />
    <link rel="canonical" href={canonicalUrl} />
    <meta name="mobile-web-app-capable" content="yes">
    <meta property="og:type" content="website" />
    <meta property="og:title" content={siteTitle} />
    <meta property="og:description" content={siteDescription} />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:image" content={ogImageUrl} />
    <meta property="og:site_name" content={siteTitle} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={siteTitle} />
    <meta name="twitter:description" content={siteDescription} />
    <meta name="twitter:image" content={ogImageUrl} />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <title>{siteTitle}</title>
    <script type="application/ld+json" is:inline>
      {JSON.stringify(schemaData)}
    </script>
    <script src="https://unpkg.com/htmx.org@1.9.12" defer></script>
    <script src="https://unpkg.com/alpinejs@3.14.1" defer></script>
    <style is:inline>
      #whois-loading {
        display: none;
      }
      #whois-loading.htmx-request {
        display: flex;
      }
      [x-cloak] {
        display: none !important;
      }
    </style>
  </head>
  <body class="flex min-h-screen flex-col bg-slate-100 text-slate-900">
    <header
      class="flex items-center justify-end gap-6 px-6 py-4 text-sm text-slate-600"
    >
      <div class="relative" x-data="notificationsDropdown()">
        <button
          type="button"
          class="relative rounded-full border border-transparent bg-white p-2 text-slate-500 shadow-sm transition hover:border-slate-200 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-offset-2 focus:ring-offset-white"
          aria-haspopup="true"
          :aria-expanded="open"
          @click="toggle()"
          @keydown.escape.stop="close()"
        >
          <svg
            class="h-5 w-5"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 19.5 9.75v-.7c0-2.485-1.355-4.783-3.553-5.998a1.003 1.003 0 0 1-.447-.832V2.25a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 0-.75.75v.97c0 .339-.174.655-.447.832A6.75 6.75 0 0 0 4.5 9.05v.7c0 2.676-.94 5.266-2.811 7.022a.75.75 0 0 0 .51 1.297h16.602a.75.75 0 0 0 .51-1.297 12.318 12.318 0 0 1-3.061-3.69zM9 20.25a2.25 2.25 0 0 0 4.5 0"
            ></path>
          </svg>
          <span
            class="absolute -right-0.5 -top-0.5 inline-flex h-2.5 w-2.5 rounded-full bg-blue-500"
            aria-hidden="true"
            x-show="hasNotifications"
            x-cloak
          ></span>
        </button>
        <div
          x-cloak
          x-show="open"
          x-transition.origin.top.right
          @click.outside="close()"
          class="absolute right-0 mt-2 w-64 rounded-xl border border-slate-200 bg-white p-3 text-left text-sm text-slate-700 shadow-lg"
          role="menu"
          aria-label="Recent notifications"
        >
          <p
            class="mb-2 text-xs font-semibold uppercase tracking-wide text-slate-500"
          >
            Notifications
          </p>
          <template x-if="error">
            <p class="rounded-lg bg-red-50 px-3 py-2 text-xs text-red-600" x-text="error"></p>
          </template>
          <p
            x-show="loading"
            x-cloak
            class="rounded-lg bg-slate-50 px-3 py-2 text-xs text-slate-600"
          >
            Loading notifications...
          </p>
          <ul class="space-y-2" x-show="!loading && notifications.length > 0" x-cloak>
            <template x-for="item in notifications" :key="item.id">
              <li class="rounded-lg bg-slate-50">
                <button
                  type="button"
                  class="w-full rounded-lg px-3 py-2 text-left transition hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-400"
                  @click.prevent="openNotification(item)"
                >
                  <p class="text-sm font-medium text-slate-900 underline decoration-slate-300 decoration-dotted hover:decoration-solid">
                    <span x-text="item.domain || 'Unknown domain'"></span>
                  </p>
                  <p class="text-xs text-slate-600" x-text="item.message"></p>
                  <p
                    class="mt-1 text-[11px] uppercase tracking-wide text-slate-400"
                    x-show="item.updatedAt"
                    x-text="formatTimestamp(item.updatedAt)"
                  ></p>
                </button>
              </li>
            </template>
          </ul>
          <p
            x-show="!loading && !error && notifications.length === 0"
            x-cloak
            class="rounded-lg bg-slate-50 px-3 py-2 text-xs text-slate-600"
          >
            You're all caught up.
          </p>
        </div>
      </div>
    </header>

    <main class="flex flex-1 flex-col items-center justify-center px-4">
      <div
        class="flex w-full max-w-3xl flex-col items-center gap-8 text-center"
      >
        <h1
          class="text-4xl font-semibold tracking-tight text-slate-900 sm:text-6xl"
        >
          Domain <span class="text-blue-600">Alert</span>
        </h1>
        <p class="text-base text-slate-600 sm:text-lg">
          Track availability, price changes, and expirations for domains you
          care about.
        </p>
        <form
          id="domain-search-form"
          class="flex w-full flex-col items-center gap-4"
          action={whoisApiPath}
          method="get"
          hx-get={whoisApiPath}
          hx-target="#whois-results"
          hx-swap="innerHTML"
          hx-indicator="#whois-loading"
          hx-on::beforeRequest="document.getElementById('whois-results').innerHTML='';"
        >
          <div
            class="flex w-full items-center gap-3 rounded-full border border-slate-200 bg-white px-5 py-3 shadow-sm transition focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-100"
          >
            <svg
              class="h-5 w-5 text-slate-400"
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              viewBox="0 0 24 24"
            >
              <circle cx="11" cy="11" r="7"></circle>
              <line x1="20" y1="20" x2="16.65" y2="16.65"></line>
            </svg>
            <input
              type="search"
              name="domain"
              id="domain-search-input"
              aria-label="Search domain"
              placeholder="Search domains or enter a URL..."
              class="flex-1 border-none bg-transparent text-base text-slate-700 placeholder:text-slate-400 focus:outline-none focus:ring-0"
              required
            />
            <button
              type="submit"
              class="hidden rounded-full bg-blue-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-offset-2 focus:ring-offset-white sm:inline"
            >
              Search
            </button>
          </div>
        </form>
        <section
          class="flex w-full max-w-2xl flex-col items-stretch gap-4 text-left"
          x-data="monitorModal()"
          x-on:monitor-modal\:open.window="openModal($event.detail.domain)"
          x-on:keydown.escape.window="closeModal()"
        >
          <div id="whois-results" class="" aria-live="polite"></div>
          <div
            id="whois-loading"
            class="mt-2 flex items-center gap-2 text-sm text-slate-600"
            role="status"
            aria-live="polite"
          >
            <svg
              class="h-4 w-4 animate-spin text-blue-600"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle
                class="opacity-25"
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="4"></circle>
              <path
                class="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
            </svg>
            <span>Fetching WHOIS details...</span>
          </div>
          <div
            x-cloak
            x-show="open"
            x-transition.opacity
            class="fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 px-4"
            role="dialog"
            aria-modal="true"
            @click="closeModal"
          >
            <div
              class="w-full max-w-md rounded-2xl bg-white p-6 shadow-xl"
              @click.stop
            >
              <div class="flex items-center justify-between">
                <h2 class="text-lg font-semibold text-slate-900">
                  Monitor options
                </h2>
                <button
                  type="button"
                  class="rounded-full p-1 text-slate-500 transition hover:bg-slate-100 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-offset-2 focus:ring-offset-white"
                  @click="closeModal"
                  aria-label="Close monitor options"
                >
                  <svg
                    class="h-5 w-5"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="1.8"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
                </button>
              </div>
              <p class="mt-2 text-sm text-slate-600" x-text="modalSubtitle"></p>
              <form class="mt-5 space-y-4" @submit.prevent="submit">
                <label class="flex items-start gap-3 text-sm text-slate-700">
                  <input
                    type="checkbox"
                    class="mt-1 h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"
                    x-model="notifyChanges"
                  />
                  <span>Notify me of every change of this domain</span>
                </label>
                <label class="flex items-start gap-3 text-sm text-slate-700">
                  <input
                    type="checkbox"
                    class="mt-1 h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"
                    x-model="notifyExpiry"
                  />
                  <span>Let me know when it expires</span>
                </label>
                <div
                  x-show="showEmailField"
                  x-transition.opacity
                  class="space-y-2 rounded-lg border border-blue-100 bg-blue-50/60 px-4 py-3"
                  x-cloak
                >
                  <label
                    for="monitor-email"
                    class="block text-sm font-medium text-slate-700"
                  >
                    Inform your email address
                  </label>
                  <input
                    id="monitor-email"
                    type="email"
                    x-model.trim="email"
                    :required="showEmailField"
                    class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
                    placeholder="you@example.com"
                    autocomplete="email"
                  />
                  <p
                    class="text-sm text-red-600"
                    x-show="emailError"
                    x-text="emailError"
                    x-cloak
                  >
                  </p>
                </div>
                <div class="mt-6 flex items-center justify-end gap-3">
                  <button
                    type="button"
                    class="rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-offset-2 focus:ring-offset-white"
                    @click="closeModal"
                  >
                    Cancel
                  </button>
                  <button
                    type="submit"
                    class="rounded-full bg-blue-600 px-6 py-2 text-sm font-medium text-white transition hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-offset-2 focus:ring-offset-white disabled:cursor-not-allowed disabled:bg-blue-400 disabled:opacity-80"
                    :disabled="saving"
                  >
                    <span x-show="!saving" x-cloak>Save preferences</span>
                    <span x-show="saving" x-cloak>Saving...</span>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer class="px-6 py-6 text-xs text-slate-500">
      <div class="flex flex-row gap-3 items-center justify-between">
        <span>© {year} Domain Alert</span>
        <div class="flex items-center gap-4">
          <a href="#" class="transition hover:text-slate-700">Privacy</a>
          <a href="#" class="transition hover:text-slate-700">Terms</a>
          <a href="#" class="transition hover:text-slate-700">About</a>
        </div>
      </div>
    </footer>
    <script is:inline define:vars={{ subscriptionsApiPath, serviceWorkerUrl, serviceWorkerScope, vapidPublicKey }}>
      (() => {
        const VAPID_PUBLIC_KEY = vapidPublicKey || null;
        if (!("serviceWorker" in navigator) || !("PushManager" in window)) {
          window.DomainAlertPush = null;
          return;
        }

        const urlBase64ToUint8 = (base64String) => {
          const padding = "=".repeat((4 - (base64String.length % 4)) % 4);
          const base64 = (base64String + padding)
            .replace(/-/g, "+")
            .replace(/_/g, "/");
          const raw = window.atob(base64);
          const outputArray = new Uint8Array(raw.length);
          for (let i = 0; i < raw.length; ++i) {
            outputArray[i] = raw.charCodeAt(i);
          }
          return outputArray;
        };

        const SERVICE_WORKER_URL = serviceWorkerUrl;
        const SERVICE_WORKER_SCOPE = serviceWorkerScope;

        let registrationPromise = null;
        let lastSubscriptionPayload = null;
        const getRegistration = async () => {
          if (!registrationPromise) {
            registrationPromise = navigator.serviceWorker.register(
              SERVICE_WORKER_URL,
              {
                scope: SERVICE_WORKER_SCOPE,
              }
            );
          }
          return registrationPromise;
        };

        window.DomainAlertPush = {
          async subscribe() {
            try {
              const registration = await getRegistration();
              if (!registration) return null;

              if (!("Notification" in window)) {
                throw new Error(
                  "Notifications are not supported in this browser."
                );
              }

              const permission =
                Notification.permission === "granted"
                  ? "granted"
                  : await Notification.requestPermission();
              if (permission !== "granted") {
                throw new Error("Notification permission was denied.");
              }

              const existingSubscription =
                await registration.pushManager.getSubscription();
              if (existingSubscription) {
                const jsonData = existingSubscription.toJSON();
                const payload = {
                  data: jsonData,
                  endpoint: jsonData?.endpoint ?? null,
                };
                lastSubscriptionPayload = payload;
                return payload;
              }

              if (!VAPID_PUBLIC_KEY) {
                throw new Error("Push notifications are not configured.");
              }

              const applicationServerKey = urlBase64ToUint8(VAPID_PUBLIC_KEY);
              const subscription = await registration.pushManager.subscribe({
                userVisibleOnly: true,
                applicationServerKey,
              });
              const jsonData = subscription.toJSON();
              const payload = {
                data: jsonData,
                endpoint: jsonData?.endpoint ?? null,
              };
              lastSubscriptionPayload = payload;
              return payload;
            } catch (error) {
              console.error("Push subscription failed:", error);
              throw error;
            }
          },
          async getExisting() {
            try {
              const registration = await getRegistration();
              if (!registration) return null;
              const existingSubscription =
                await registration.pushManager.getSubscription();
              if (!existingSubscription) {
                return null;
              }
              const jsonData = existingSubscription.toJSON();
              return {
                data: jsonData,
                endpoint: jsonData?.endpoint ?? null,
              };
            } catch (error) {
              console.error("Failed to read existing subscription:", error);
              return null;
            }
          },
          getLast() {
            return lastSubscriptionPayload;
          },
        };
      })();
    </script>
    <script is:inline define:vars={{ subscriptionsApiPath }}>
      const SUBSCRIPTIONS_API_PATH = subscriptionsApiPath;
      document.addEventListener("alpine:init", () => {
        Alpine.data("notificationsDropdown", () => ({
          open: false,
          notifications: [],
          loading: false,
          error: null,
          auth: null,
          init() {
            this.fetchNotifications();
          },
          toggle() {
            this.open = !this.open;
            if (this.open && !this.loading) {
              this.fetchNotifications();
            }
          },
          close() {
            this.open = false;
          },
          async fetchNotifications() {
            this.loading = true;
            this.error = null;
            try {
              const provider = window.DomainAlertPush;
              if (!provider || typeof provider.getExisting !== "function") {
                this.notifications = [];
                this.auth = null;
                return;
              }
              const existing = await provider.getExisting();
              const auth = existing?.data?.keys?.auth ?? null;
              if (!auth) {
                this.notifications = [];
                this.auth = null;
                return;
              }
              this.auth = auth;
              const url = new URL(SUBSCRIPTIONS_API_PATH, window.location.origin);
              url.searchParams.set("auth", auth);
              const response = await fetch(url.toString(), {
                method: "GET",
                headers: {
                  Accept: "application/json",
                },
              });
              if (!response.ok) {
                throw new Error(`Request failed with status ${response.status}`);
              }
              const payload = await response.json();
              this.notifications = Array.isArray(payload.notifications)
                ? payload.notifications
                : [];
            } catch (error) {
              console.error("Failed to load notifications:", error);
              this.error = "Unable to load notifications.";
              this.notifications = [];
            } finally {
              this.loading = false;
            }
          },
          get hasNotifications() {
            return this.notifications.length > 0;
          },
          async openNotification(item) {
            if (!item || !item.domain) {
              return;
            }
            const input = document.querySelector("#domain-search-input");
            const form = document.getElementById("domain-search-form");
            if (input instanceof HTMLInputElement) {
              input.value = item.domain;
              input.dispatchEvent(new Event("input", { bubbles: true }));
            }
            if (form instanceof HTMLFormElement) {
              if (typeof form.requestSubmit === "function") {
                form.requestSubmit();
              } else {
                form.submit();
              }
            }

            const payload = {
              id: item.id,
            };
            if (this.auth) {
              payload.auth = this.auth;
            }
            try {
              const response = await fetch(SUBSCRIPTIONS_API_PATH, {
                method: "PATCH",
                headers: {
                  "Content-Type": "application/json",
                  Accept: "application/json",
                },
                body: JSON.stringify(payload),
              });
              if (!response.ok) {
                throw new Error(`Request failed with status ${response.status}`);
              }
              this.notifications = this.notifications.filter(
                (notification) => notification.id !== item.id
              );
            } catch (error) {
              console.error("Failed to update notification:", error);
              this.error = "Unable to update notification state.";
            }
          },
          formatTimestamp(value) {
            if (!value) return "";
            const date = new Date(value);
            if (Number.isNaN(date.valueOf())) {
              return "";
            }
            return new Intl.DateTimeFormat(undefined, {
              dateStyle: "medium",
              timeStyle: "short",
            }).format(date);
          },
        }));
        Alpine.data("monitorModal", () => ({
          open: false,
          domain: "",
          notifyChanges: false,
          notifyExpiry: false,
          email: "",
          emailError: "",
          saving: false,
          init() {
            this.$watch("notifyChanges", () => {
              if (!this.showEmailField) {
                this.email = "";
                this.emailError = "";
              }
            });
            this.$watch("notifyExpiry", () => {
              if (!this.showEmailField) {
                this.email = "";
                this.emailError = "";
              }
            });
          },
          get modalSubtitle() {
            if (!this.domain) {
              return "Choose how you want to stay informed about this domain.";
            }
            return `Choose how you want to stay informed about ${this.domain}.`;
          },
          get showEmailField() {
            return this.notifyChanges || this.notifyExpiry;
          },
          openModal(domain) {
            this.domain = domain || "";
            this.notifyChanges = false;
            this.notifyExpiry = false;
            this.email = "";
            this.emailError = "";
            this.open = true;
          },
          closeModal() {
            this.open = false;
          },
          async submit() {
            if (this.saving) return;
            this.saving = true;
            try {
              if (!this.notifyChanges && !this.notifyExpiry) {
                throw new Error(
                  "Select at least one notification preference before saving."
                );
              }

              const payload = {
                domain: this.domain || null,
                notifyChanges: this.notifyChanges,
                notifyExpiry: this.notifyExpiry,
              };

              const trimmedEmail = this.email.trim();
              if (this.showEmailField) {
                if (!trimmedEmail) {
                  this.emailError = "Email address is required.";
                  this.saving = false;
                  return;
                }

                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(trimmedEmail)) {
                  this.emailError = "Please enter a valid email address.";
                  this.saving = false;
                  return;
                }

                payload.email = trimmedEmail;
                this.emailError = "";
              } else {
                payload.email = null;
              }

              const pushSupport = window.DomainAlertPush;
              let subscriptionPayload = null;
              if (pushSupport) {
                try {
                  subscriptionPayload = await pushSupport.subscribe();
                } catch (error) {
                  console.warn("Push subscription unavailable:", error);
                  subscriptionPayload = null;
                }
                if (!subscriptionPayload && typeof pushSupport.getLast === "function") {
                  subscriptionPayload = pushSupport.getLast();
                }
              }
              payload.subscription = subscriptionPayload?.data ?? null;
              payload.subscriptionEndpoint = subscriptionPayload?.endpoint ?? null;
              const response = await fetch(SUBSCRIPTIONS_API_PATH, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload),
              });
              if (!response.ok) {
                const result = await response.json().catch(() => ({}));
                const errorMessage =
                  result?.error ?? "Unable to save preferences.";
                throw new Error(errorMessage);
              }
              this.closeModal();
            } catch (error) {
              console.error("Failed to save monitor preferences:", error);
              alert(
                error?.message ||
                  "We couldn't enable notifications for this domain. Please check your browser settings and try again."
              );
            } finally {
              this.saving = false;
            }
          },
        }));
      });
    </script>
  </body>
</html>
